{"version":3,"sources":["reducers/markers.js","reducers/globals.js","reducers/index.js","reducers/test.js","actions/types.js","actions/new_marker.js","actions/load_marker.js","components/NewMarker.js","components/ToolBar.js","components/Filter.js","components/Home.js","components/Main.js","index.js"],"names":["defaultValues","markers","a0001","lat","lng","a0002","newMarketShowRefPoint","newMarketFromOpen","combineReducers","test","state","action","type","payload","console","log","globals","update","$merge","setNewMarkerRefPointOn","dispatch","setNewMarkerRefPointOff","setNewMarkerFromOpen","setNewMarkerFromClose","require","config","loadMarkers","data","token","a","body","JSON","stringify","latMin","latMax","lngMin","lngMax","headers","process","axios","post","res","NewMarker","Component","connect","ToolBar","this","props","s","onClick","style","textAlign","renderToolBar","actions","Filter","Home","mapRef","React","createRef","zoom","centerLat","centerLng","newMarkerIcon","items","Object","entries","forEach","markerId","markerData","push","Marker","key","position","Popup","bounds","current","leafletElement","getBounds","mapwidh","Math","abs","_northEast","_southWest","mapheight","setState","lastLatMax","lastLatMin","lastLngMax","lastLngMin","center","newMarkerLat","newMarkerLng","renderNewMarkerFrom","Map","ref","display","onViewportChange","onChangeMapPosition","zoomControl","TileLayer","attribution","url","renderMarker","renderNewMarketIcon","Main","exact","path","component","store","createStore","reducers","compose","applyMiddleware","reduxThunk","window","devToolsExtension","f","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.6c6a687d.chunk.js","sourcesContent":["import update from 'react-addons-update';\r\n\r\nimport { LOAD_MARKERS } from '../actions/types';\r\n\r\nvar defaultValues = {\r\n  markers: {\r\n      a0001:{\r\n        lat: 51.505,\r\n        lng: -0.09\r\n      },\r\n      a0002:{\r\n        lat: 50.505,\r\n        lng: -0.09\r\n      },\r\n  }\r\n}\r\n\r\nexport default function(state = defaultValues , action) {\r\n  switch (action.type){\r\n    case LOAD_MARKERS:\r\n      console.log(action.payload);\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}","import update from 'react-addons-update';\r\n\r\nimport { SET_GLOBAL_CONFIG } from '../actions/types';\r\n\r\nvar defaultValues = {\r\n    newMarketShowRefPoint: false,\r\n    newMarketFromOpen: false\r\n}\r\n\r\nexport default function(state = defaultValues , action) {\r\n  switch (action.type){\r\n    case SET_GLOBAL_CONFIG:\r\n      return update(state, {$merge: action.payload} );\r\n    default:\r\n      return state;\r\n  }\r\n}","  \r\nimport { combineReducers } from 'redux';\r\n\r\nimport test from './test';\r\nimport markers from './markers';\r\nimport globals from './globals';\r\n\r\nexport default combineReducers({\r\n  test: test,\r\n  markers: markers,\r\n  globals: globals\r\n});","import { TEST } from '../actions/types';\r\n\r\nexport default function(state = 0 , action) {\r\n  switch (action.type){\r\n    case TEST:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}","export const TEST = 'test';\r\nexport const SET_GLOBAL_CONFIG = 'set_global_config';\r\nexport const LOAD_MARKERS = 'load_markers';","import {\r\n    SET_GLOBAL_CONFIG\r\n } from './types';\r\n \r\nexport const setNewMarkerRefPointOn = () => dispatch => {\r\n  dispatch({ type: SET_GLOBAL_CONFIG, payload: {newMarketShowRefPoint: true}});\r\n};\r\n\r\nexport const setNewMarkerRefPointOff = () => dispatch => {\r\n  dispatch({ type: SET_GLOBAL_CONFIG, payload: {newMarketShowRefPoint: false}});\r\n};\r\n\r\nexport const setNewMarkerFromOpen = () => dispatch => {\r\n  dispatch({ type: SET_GLOBAL_CONFIG, payload: {newMarketFromOpen: true}});\r\n};\r\n\r\nexport const setNewMarkerFromClose = () => dispatch => {\r\n  dispatch({ type: SET_GLOBAL_CONFIG, payload: {newMarketFromOpen: false}});\r\n};\r\n\r\n","import axios from 'axios';\r\n\r\nimport {\r\n    LOAD_MARKERS\r\n} from './types';\r\n\r\nrequire('dotenv').config();\r\n\r\nexport const loadMarkers = (data, token) => async (dispatch) => {\r\n    try {\r\n        let body = JSON.stringify({ latMin: -100, latMax: 100, lngMin: -100, lngMax: 100 })\r\n        let config = {\r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'X-Api-Key': process.env.REACT_APP_FIREBASE_API_KEY,\r\n                //'Access-Control-Allow-Origin': '*'\r\n            }\r\n        }\r\n        console.log('AQUI1');\r\n        const res = await axios.post('https://f5uu7v12oa.execute-api.us-east-1.amazonaws.com/staging/locations/list',body,config);\r\n\r\n       // dispatch({ type: LOAD_MARKERS, payload: {markerList: res}});\r\n        console.log('AQUI2');\r\n        console.log(res);\r\n        return true;\r\n    } catch (err) {\r\n        console.log('AQUI3');\r\n        console.log(err);\r\n        return false;\r\n    }\r\n};","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass NewMarker extends Component { \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n         VENTANA PARA CREAR PUNTO\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nexport default connect()(NewMarker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Button, Row, Col } from 'react-materialize';\r\nimport * as actions from '../actions';\r\n\r\nclass ToolBar extends Component { \r\n\r\nrenderToolBar(){\r\n    if(this.props.globals.newMarketShowRefPoint){\r\n      return(\r\n        <div>\r\n          <Col s={6}>\r\n            <Button  \r\n              onClick={ () => this.props.setNewMarkerRefPointOff() }\r\n            >\r\n              Cancelar\r\n            </Button >\r\n          </Col>\r\n          <Col s={6}>\r\n            <Button  \r\n              onClick={ () => this.props.setNewMarkerFromOpen() }\r\n            >\r\n              Continuar\r\n            </Button >\r\n          </Col>\r\n        </div>\r\n      );\r\n    }else{\r\n      return(\r\n        <Button  \r\n          onClick={ () => this.props.setNewMarkerRefPointOn() }\r\n        >\r\n          Nuevo punto\r\n        </Button >\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n          <Row style={{textAlign:'center'}}>\r\n              <Col s={12}>\r\n                {this.renderToolBar()}\r\n              </Col>\r\n            </Row>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        globals: state.globals\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, actions)(ToolBar);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Filter extends Component { \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n         FILTRO\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nexport default connect()(Filter);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport Control from 'react-leaflet-control';\r\nimport { Button, Row, Col, Modal } from 'react-materialize';\r\nimport * as actions from '../actions';\r\n\r\nimport NewMarker from './NewMarker';\r\nimport ToolBar from './ToolBar';\r\nimport Filter from './Filter';\r\n\r\nclass Home extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      zoom: 13,\r\n      //TODO: Cambiar a globales\r\n      centerLat: -32.931,\r\n      centerLng: -71.528,\r\n      newMarkerIcon: {\r\n        lat: -32.931,\r\n        lng: -71.528\r\n      }\r\n    }\r\n  }\r\n\r\n  mapRef = React.createRef();\r\n\r\n  renderMarker(){\r\n    const items = [];\r\n    if(!this.props.globals.newMarketShowRefPoint){\r\n      Object.entries(this.props.markers).forEach(function(data) {\r\n        const markerId = data[0];\r\n        const markerData = data[1];\r\n        items.push(\r\n          <Marker \r\n            key={markerId} \r\n            position={[markerData.lat, markerData.lng]}\r\n          >\r\n            <Popup>\r\n              Mi ID es: {markerId}\r\n            </Popup>\r\n          </Marker>\r\n        );\r\n      });\r\n    }\r\n    return(<div>{items}</div>);\r\n  }\r\n\r\n  renderNewMarketIcon(){\r\n    if(this.props.globals.newMarketShowRefPoint){\r\n      return(\r\n        <Marker \r\n          position={[this.state.newMarkerIcon.lat, this.state.newMarkerIcon.lng]}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.loadMarkers();\r\n    let bounds = this.mapRef.current.leafletElement.getBounds();\r\n    let mapwidh = Math.abs(bounds._northEast.lat - bounds._southWest.lat); //ancho\r\n    let mapheight = Math.abs(bounds._northEast.lng - bounds._southWest.lng); //alto\r\n    console.log(\"Se frist last coord for request\");\r\n    this.setState({\r\n      lastLatMax: bounds._northEast.lat + mapwidh,\r\n      lastLatMin: bounds._southWest.lat - mapwidh,\r\n      lastLngMax: bounds._northEast.lng + mapheight,\r\n      lastLngMin: bounds._northEast.lng - mapheight\r\n    });\r\n  }\r\n\r\n  onChangeMapPosition(data){\r\n    this.setState({\r\n      newMarkerIcon: {\r\n        lat: data.center[0],\r\n        lng: data.center[1]\r\n      }\r\n    });\r\n    //let bounds = this.mapRef.current.leafletElement.getBounds();\r\n    //console.log(bounds._northEast.lat); //arriba derecha de la ventana\r\n    //console.log(bounds._northEast.lng);\r\n    //console.log(bounds._southWest.lat); //abajo izquierda de la venana\r\n    //console.log(bounds._southWest.lng);\r\n    //let mapwidh = Math.abs(bounds._northEast.lat - bounds._southWest.lat); //ancho\r\n    //let mapheight = Math.abs(bounds._northEast.lng - bounds._southWest.lng); //alto\r\n    //console.log(mapwidh);\r\n    //console.log(mapheight);\r\n    //console.log(bounds._northEast.lat + mapwidh); //limite superior de carga (pared de la derecha)\r\n    //console.log(bounds._southWest.lat - mapwidh); //lminte inferior de carga (pared de la izquierda)\r\n    //console.log(bounds._northEast.lng + mapheight); //lminte inferior de carga (techo)\r\n    //console.log(bounds._northEast.lng - mapheight); //lminte inferior de carga (base)\r\n\r\n  }\r\n\r\n  renderNewMarkerFrom(){\r\n    if(this.props.globals.newMarketFromOpen){\r\n      return(\r\n        <NewMarker\r\n          newMarkerLat={this.state.newMarkerIcon.lat}\r\n          newMarkerLng={this.state.newMarkerIcon.lng}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.renderNewMarkerFrom()}\r\n        <Map \r\n          ref={this.mapRef}\r\n          style={{display: this.props.globals.newMarketFromOpen ? 'none' : 'bock'}}\r\n          center={[this.state.centerLat,this.state.centerLng]}\r\n          zoom={this.state.zoom}\r\n          onViewportChange={(data) => this.onChangeMapPosition(data)}\r\n          zoomControl={false}\r\n        >\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          {this.renderMarker()}\r\n          {this.renderNewMarketIcon()}\r\n          <Control position=\"topleft\" >\r\n            <Filter/>\r\n          </Control>\r\n          <Control position=\"bottomleft\" >\r\n            <ToolBar/>\r\n          </Control>\r\n        </Map>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nfunction mapStateToProps(state){\r\n  return {\r\n    markers: state.markers.markers,\r\n    globals: state.globals\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps,actions)(Home);","import React from 'react';\r\nimport { BrowserRouter, Route } from 'react-router-dom';\r\n\r\nimport Home from './Home';\r\n\r\nconst Main = () => {\r\n  return(\r\n    <BrowserRouter>\r\n      <div>\r\n        <Route exact={true} path=\"/\" component={Home} />\r\n      </div>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Main;","import 'materialize-css/dist/js/materialize.min.js'\nimport 'materialize-css/dist/css/materialize.min.css';\nimport './css/customCss.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\nimport reducers from './reducers';\nimport Main from './components/Main';\n\n//TODO: quitar loger de redux dev tools para production\nconst store = createStore(reducers, {},\n  compose(\n    applyMiddleware(reduxThunk),\n    window.devToolsExtension ? window.devToolsExtension() : f => f\n    )\n  );\n\nReactDOM.render(\n  <Provider store={store}>\n      <Main />\n  </Provider>,\n  document.querySelector('#root')\n);"],"sourceRoot":""}